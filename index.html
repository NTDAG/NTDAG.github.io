<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>我的 TodoList</title>
    <style>
        body { max-width: 600px; margin: 0 auto; padding: 20px; font-family: sans-serif; }
        .container { text-align: center; }
        #taskInput { width: 70%; padding: 8px; }
        #addBtn { padding: 8px 16px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        #taskList { list-style: none; padding: 0; margin-top: 20px; }
        .task-item { padding: 10px; margin: 5px 0; background: #f5f5f5; display: flex; justify-content: space-between; }
        .task-item.done { text-decoration: line-through; color: #888; }
        .deleteBtn { background: #ff4444; color: white; border: none; padding: 4px 8px; cursor: pointer; }
    </style>
</head>
<body>
<div class="container">
    <h1>TodoList</h1>
    <input type="text" id="taskInput" placeholder="输入任务...">
    <button id="addBtn">添加</button>
    <ul id="taskList"></ul>
</div>

<script>
    // 获取DOM元素
    const taskInput = document.getElementById('taskInput');
    const addBtn = document.getElementById('addBtn');
    const taskList = document.getElementById('taskList');

    // 从本地存储加载任务
    function loadTasks() {
        const tasks = JSON.parse(localStorage.getItem('todoTasks') || '[]');
        tasks.forEach(task => addTaskToDOM(task.text, task.done));
    }

    // 添加任务到页面
    function addTaskToDOM(text, done = false) {
        const li = document.createElement('li');
        li.className = `task-item ${done ? 'done' : ''}`;
        li.innerHTML = `
        <span>${text}</span>
        <div>
          <button class="toggleBtn">${done ? '取消完成' : '完成'}</button>
          <button class="deleteBtn">删除</button>
        </div>
      `;
        taskList.appendChild(li);

        // 绑定事件
        li.querySelector('.toggleBtn').addEventListener('click', () => {
            li.classList.toggle('done');
            const btnText = li.classList.contains('done') ? '取消完成' : '完成';
            li.querySelector('.toggleBtn').textContent = btnText;
            saveTasks(); // 保存到本地存储
        });

        li.querySelector('.deleteBtn').addEventListener('click', () => {
            li.remove();
            saveTasks(); // 保存到本地存储
        });
    }

    // 保存任务到本地存储
    function saveTasks() {
        const tasks = [];
        document.querySelectorAll('.task-item').forEach(item => {
            tasks.push({
                text: item.querySelector('span').textContent,
                done: item.classList.contains('done')
            });
        });
        localStorage.setItem('todoTasks', JSON.stringify(tasks));
    }

    // 添加任务按钮事件
    addBtn.addEventListener('click', () => {
        const text = taskInput.value.trim();
        if (text) {
            addTaskToDOM(text);
            taskInput.value = '';
            saveTasks(); // 保存到本地存储
        }
    });

    // 按回车添加任务
    taskInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addBtn.click();
    });

    // 页面加载时加载任务
    loadTasks();
</script>
</body>
</html>